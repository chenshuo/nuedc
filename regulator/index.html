<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="陈硕">
        <link rel="canonical" href="https://nuedc.org/regulator/">
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>稳压与基准 - 全国大学生电子设计竞赛</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
        <link href="../extra.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script>
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-KF122GXJGS"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', "G-KF122GXJGS");
        </script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">全国大学生电子设计竞赛</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href=".." class="nav-link">首页</a>
                            </li>
                            <li class="navitem">
                                <a href="../problems/" class="nav-link">历届试题</a>
                            </li>
                            <li class="navitem">
                                <a href="../datasheets/" class="nav-link">器件手册</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">资料笔记 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../notes/" class="dropdown-item">资料</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active">稳压与基准</a>
</li>
                                    
<li>
    <a href="../741/" class="dropdown-item">741 运放</a>
</li>
                                    
<li>
    <a href="../rc4558/" class="dropdown-item">RC4558 运放</a>
</li>
                                    
<li>
    <a href="../bjt-circuits/" class="dropdown-item">定性使用 BJT 三极管</a>
</li>
                                    
<li>
    <a href="../diode/" class="dropdown-item">二极管复习</a>
</li>
                                    
<li>
    <a href="../bjt-basics/" class="dropdown-item">BJT 三极管基础知识复习</a>
</li>
                                </ul>
                            </li>
                            <li class="navitem">
                                <a href="../about/" class="nav-link">关于</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                            <li class="nav-item">
                                <a rel="prev" href="../notes/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../741/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/chenshuo/nuedc" class="nav-link"><i class="fa fa-github"></i> GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="2"><a href="#_1" class="nav-link">简史</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="2"><a href="#lm7805" class="nav-link">LM7805 内部电路简析</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="2"><a href="#tl431" class="nav-link">TL431</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="2"><a href="#lm185" class="nav-link">LM185</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="2"><a href="#ad580" class="nav-link">AD580</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="2"><a href="#_2" class="nav-link">参考</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1> 常用集成稳压芯片与电压基准 </h1>

<h2 id="_1">简史</h2>
<p>1960s 分立器件。早期的功率三极管受半导体材料限制，PNP 型是锗管性能较好，NPN 型是硅管性能较好（beta 大、输出电流大、耐压高）。因此，硅集成电路上，以 NPN 管为主，而 PNP 管的 beta 只有几十。早年的功放推挽输出要靠 PNP 锗管和 NPN 硅管配对，比较难搞。</p>
<p>1968 年，Fairchild 上市 <a href="https://www.ti.com/lit/ds/symlink/ua723.pdf">µA723</a>，输出电流 150mA。根据 µA741 的发明人 <a href="https://archive.computerhistory.org/resources/text/Oral_History/Fairchild_at_50/102658281.05.01.acc.pdf">Dave Fullagar 的说法</a>，它是 Darryl Lieux 设计的。它内部是用 JFET 做了一个恒流源，驱动 Zener 二极管来获得电压基准 (7.15V)。它使用较为复杂、一般要接五六个外围阻容元件。如需大电流，还需要外接功率三极管。</p>
<p>1969 <a href="https://en.wikipedia.org/wiki/Bob_Widlar">Robert Widlar</a> (当时在 National 工作) 发明了 bandgap voltage reference，并为 National 设计了第一个集成 5V 三端稳压电路 LM109/LM309，<a href="http://www.ti.com/lit/an/snva512b/snva512b.pdf">设计思路</a>、<a href="http://www.bitsavers.org/components/national/_dataBooks/1971_National_Linear_Integrated_Circuits.pdf">1971 年数据手册</a>。输出电流达到 1A，说明温度系数很好。</p>
<p><a href="http://www.bitsavers.org/components/fairchild/_dataBooks/1971_Fairchild_Linear_Integrated_Circuits_Data_Catalog.pdf">1971 年 Fairchild 发布 µA7800</a> 系列三端稳压电路，采用的是 4 Vbe 的基准。
<a href="https://www.righto.com/2014/09/reverse-engineering-counterfeit-7805.html">有人推测</a>是为了避免电路专利纠纷。</p>
<p><a href="http://www.bitsavers.org/components/national/_dataBooks/1972_National_Linear_Integrated_Circuits.pdf">1972 年 National 发布 LM340-xx</a> 系列三端稳压电路，<a href="http://www.bitsavers.org/components/national/_dataBooks/1980_National_Linear_Databook.pdf">后来改名为 LM78xx</a> (估计是跟风 Fairchild)。
这个系列采用的是 3 Vbe 的基准，据说跟 <a href="http://www.ti.com/lit/an/snva512b/snva512b.pdf">LM109 的电路</a>很相似，只是加了电阻分压反馈来获得 12V / 15V 的输出。Robert Widlar 1970 年 33 岁时从 National 退休，我猜他可能参与了 LM7805 的设计，但没有直接证据。</p>
<p>所以，从内部电路上看（存在多个修订版本，暂略），National 的 LM340-5.0 = 自家的 LM7805 != Fairchild 的 µA7805，尽管通常可以互换使用。国内仿制的 W7800 系列电路是参照 Fairchild 的 µA7805 设计，也是 4 Vbe 的基准。</p>
<p>TO-220 封装的 LM7805 的 pin 1 是输入，pin 2 是 GND，pin 3 是 5V 输出。
有一些旧的资料把 pin 2 和 pin 3 互换，我猜是 TO-3 金属封装的遗迹，因为金封 LM7805
的两个管脚是 Vin 和 Vout，而外壳接 GND，一般把金属外壳当作 pin 3，所以旧的资料说 pin 3 是 GND。</p>
<p>1976 <a href="https://en.wikipedia.org/wiki/Bob_Dobkin">Robert C. Dobkin</a> 发明了 <a href="https://en.wikipedia.org/wiki/LM317">LM317</a>，第一个可调三端稳压器件。
同年？<a href="https://en.wikipedia.org/wiki/Bob_Pease">Robert A. Pease</a> 发明了 LM337，负电压可调三端稳压。</p>
<p>1978 TI 发布了可调电压基准 TL431。<a href="https://frank.pocnet.net/other/sos/TexasInstruments_TheVoltageRegulatorHandbook_1977.pdf">1977 年“预告”</a>，1978 年上市。经典的开关电源控制芯片 TL494 是跟 TL431 是同年上市的。</p>
<h2 id="lm7805">LM7805 内部电路简析</h2>
<p><a href="https://www.righto.com/2014/09/reverse-engineering-counterfeit-7805.html">https://www.righto.com/2014/09/reverse-engineering-counterfeit-7805.html</a></p>
<p>现在的 datasheet 没有具体参数(电阻阻值)，要看旧图。
即便如此，三极管的参数(beta、面积比)也无从得知。</p>
<p>78L05 的电路比 7805 要容易理解得多，建议从此入手。
μA78L05 内部电路的分析与仿真 <a href="https://chenshuo.github.io/notes/UA78L05">https://chenshuo.github.io/notes/UA78L05</a></p>
<p>这是我仿真得到的 μA78L05 直流工作点：</p>
<p><img alt="μA78L05 op" src="../img/ua78l05op.png" /></p>
<p>LM7805 与 μA7805 内部电路的分析与仿真 <a href="https://chenshuo.github.io/notes/LM7805">https://chenshuo.github.io/notes/LM7805</a></p>
<p>这是我仿真得到的 μA7805 直流工作点：</p>
<p><img alt="μA7805 DC operating point" src="../img/ua7805op.png" /></p>
<p>这是用<a href="https://github.com/kafana/ltspice-misc/blob/master/models/regulators.lib">网上找的 SPICE 模型</a>仿真的 LM7805 直流工作点：</p>
<p><img alt="LM7805 DC operating point" src="../img/lm7805op.png" /></p>
<p><strong>一个猜想</strong></p>
<p>从三极管的编号可以推测电路的设计过程。7805 是 1970 年左右设计的，当时可没有什么 EDA 软件。鼠标是 1968 年才发明，第一个图形界面的计算机是 1973 年上市（<a href="https://en.wikipedia.org/wiki/Xerox_Alto">Xerox Alto</a>），Unix 是 1974 年对外发布，SPICE 也是 1973 年发表第一版。所以我推测 7805 是手工计算+画图来设计的，设计步骤会以纸质文档的方式保存下来。那么更改三极管的编号就不是电子文档里“查找+替换”那么简单。所以三级管的编号一定程度上可以推测电路的设计过程，这里以 μA7805 的 bandgap 基准部分为例：<strong>我猜</strong>，一开始的设计是常规的 3 个三极管：</p>
<p><img alt="μA7805 Bandgap guess" src="../img/ua7805guess.png" /></p>
<p>假设 <script type="math/tex">V_\mathrm{BE1}\approx V_\mathrm{BE3}</script>，那么 <script type="math/tex">R_1</script> 和 <script type="math/tex">R_2</script> 上的电压基本相等，所以 <script type="math/tex">I_1=\dfrac{R_2}{R_1}{I_2}</script>，于是 <script type="math/tex">R_3</script> 上的电压 <script type="math/tex">V_\mathrm{R3} =\Delta V_\mathrm{BE} = V_\mathrm{T}\ln \dfrac{R_2}{R_1}</script>. <script type="math/tex">R_2</script> 上的电压 <script type="math/tex">V_\mathrm{R2} = \dfrac{R_2}{R_3} \Delta V_\mathrm{BE} = \dfrac{R_2}{R_3} \ln \dfrac{R_2}{R_1} \Delta V_\mathrm{T}</script>.</p>
<p>随后发现可能 <script type="math/tex">Q_3</script> 的增益不够，或者其他原因，需要加一个 <script type="math/tex">Q_4</script> 做 Darlinton。这样一来，<script type="math/tex">Q_2</script> 集电极的电压就变成了 <script type="math/tex">V_\mathrm{BE4} + V_\mathrm{BE3} \approx 2 V_\mathrm{BE}\approx 1.3</script>V，为了把 <script type="math/tex">Q_1</script> 集电极的电压也升高为 <script type="math/tex">2 V_\mathrm{BE}</script>，就加入了 <script type="math/tex">Q_7</script>。然后为了释放 <script type="math/tex">Q_7</script> 的发射极电流，又增加了 <script type="math/tex">R_{10}</script> 这个泻流电阻。同理，<script type="math/tex">R_{14}</script> 是给 <script type="math/tex">Q_4</script> 泻流用的。于是电路就变成了现在这个样子，三极管的编号也就这么确定下来了。</p>
<p><img alt="μA7805 Bandgap" src="../img/ua7805bandgap.png" /></p>
<h2 id="tl431">TL431</h2>
<p>TL431 内部电路的分析与计算： <a href="https://chenshuo.github.io/notes/tl431">https://chenshuo.github.io/notes/tl431</a></p>
<p>这是我仿真得到的 TL431 直流工作点：</p>
<p><img alt="TL431 DC operating point" src="../img/tl431op.png" /></p>
<p>我怀疑 TI 公布的内部电路留了一手，手册上给的内部电路参数可以符合直流和交流特性，但是不一定符合温度特性。</p>
<h2 id="lm185">LM185</h2>
<p><a href="https://www.righto.com/2022/04/reverse-engineering-lm185-voltage.html">https://www.righto.com/2022/04/reverse-engineering-lm185-voltage.html</a></p>
<h2 id="ad580">AD580</h2>
<h2 id="_2">参考</h2>
<ul>
<li>
<p>Bob Pease "The Design of Band-Gap Reference Circuits: Trials and Tribulations", https://www.tayloredge.com/reference/Ganssle-Pease/bobpease-bandgap.pdf</p>
</li>
<li>
<p>1971 年 Fairchild <a href="https://bitsavers.org/components/fairchild/_dataBooks/1971_Fairchild_Linear_Integrated_Circuits_Data_Catalog.pdf">Linear Integrated Circuits Data Catalog</a> 出现了 μA7800</p>
</li>
<li>
<p>1972 年 National Semiconductor <a href="https://bitsavers.org/components/national/_dataBooks/1972_National_Linear_Integrated_Circuits.pdf">Linear Integrated Circuits</a> 有 LM340，也就是后来的 LM7800</p>
</li>
<li>
<p>1974 年 Fairchild <a href="https://bitsavers.org/components/fairchild/_dataBooks/1974_Fairchild_Voltage_Regulator_Applications_Handbook.pdf">Voltage Regulator Applications Handbook</a> 介绍了 μA7805 内部工作原理</p>
</li>
<li>
<p>1977 年 TI <a href="https://frank.pocnet.net/other/sos/TexasInstruments_TheVoltageRegulatorHandbook_1977.pdf">Voltage Regulator Handbook</a> 宣布 TL431 即将上市</p>
</li>
<li>
<p>1977 年 Signetics <a href="http://www.bitsavers.org/components/signetics/_dataBooks/1977_Signetics_Analog_Data_Manual.pdf">Analog Data Manual</a></p>
</li>
<li>
<p>1980 年 National Semiconductor <a href="https://media.searchelec.com/specshee/NATIONAL/NationalSemiconductorVoltageRegulatorHandbook1980_text.pdf">Voltage Regulator Handbook</a></p>
</li>
<li>
<p>Linden T. Harrison, <em>Current Sources and Voltage References</em>, 2005.</p>
</li>
</ul></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../js/jquery-3.6.0.min.js"></script>
        <script src="../js/bootstrap.min.js"></script>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS_HTML"></script>

        <div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
